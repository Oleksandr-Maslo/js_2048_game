{"version":3,"sources":["scripts/main.js"],"names":["gameOver","startButton","document","querySelector","restartButton","startMessage","winMessage","loseMessage","board","rows","columns","isMoved","score","winValue","innerText","directions","Left","Right","Down","Up","setField","row","cell","field","createElement","id","toString","update","getElementById","append","startGame","classList","add","remove","appendNewCell","appended","cellNumber","Math","random","floor","column","num","slide","initialRow","slice","filteredRow","filter","i","length","push","slideLeft","r","c","checkGameOver","slideRight","reverse","slideUp","slideDown","lose","win","zeros","currentValue","window","onload","addEventListener","e","code"],"mappings":";AAAA,aAEA,IAiBIA,EAjBEC,EAAcC,SAASC,cAAc,UACrCC,EAAgBF,SAASC,cAAc,YACvCE,EAAeH,SAASC,cAAc,kBACtCG,EAAaJ,SAASC,cAAc,gBACpCI,EAAcL,SAASC,cAAc,iBAEvCK,EAAQ,CACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IAGNC,EAAO,EACPC,EAAU,EAEZC,GAAU,EAGVC,EAAQ,EACNC,EAAW,KAEjBX,SAASC,cAAc,eAAeW,UAAYF,EAElD,IAAMG,EAAa,CACjBC,KAAM,YACNC,MAAO,aACPC,KAAM,YACNC,GAAI,WAKN,SAASC,IACPT,GAAU,EACVX,GAAW,EAEN,IAAA,IAAIqB,EAAM,EAAGA,EAAMZ,EAAMY,IACvB,IAAA,IAAIC,EAAO,EAAGA,EAAOZ,EAASY,IAAQ,CACnCC,IAAAA,EAAQrB,SAASsB,cAAc,OAErCD,EAAME,GAAKJ,EAAIK,WAAa,IAAMJ,EAAKI,WAIvCC,EAAOJ,EAFKf,EAAMa,GAAKC,IAIvBpB,SAAS0B,eAAe,SAASC,OAAON,IAK9C,SAASO,IACPtB,EAAQ,CACN,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IAGZG,GAAU,EACVX,GAAW,EACXY,EAAQ,EACRV,SAASC,cAAc,eAAeW,UAAYF,EAE7C,IAAA,IAAIS,EAAM,EAAGA,EAAMZ,EAAMY,IACvB,IAAA,IAAIC,EAAO,EAAGA,EAAOZ,EAASY,IAAQ,CACnCC,IAAAA,EACFrB,SAAS0B,eAAeP,EAAIK,WAAa,IAAMJ,EAAKI,YAExDH,EAAME,GAAKJ,EAAIK,WAAa,IAAMJ,EAAKI,WACvCC,EAAOJ,EAAO,GAIlBlB,EAAa0B,UAAUC,IAAI,UAC3B1B,EAAWyB,UAAUC,IAAI,UACzBzB,EAAYwB,UAAUC,IAAI,UAE1B/B,EAAY8B,UAAUC,IAAI,UAC1B5B,EAAc2B,UAAUE,OAAO,UAE/BC,IACAA,IAGF,SAASA,IAKA,IAJHC,IAAAA,GAAW,EAETC,EADSC,KAAKC,UACS,GAAM,EAAI,GAE/BH,GAAU,CACVd,IAAAA,EAAMgB,KAAKE,MAAMF,KAAKC,SAAW7B,GACjC+B,EAASH,KAAKE,MAAMF,KAAKC,SAAW5B,GAEtCF,GAAuB,IAAvBA,EAAMa,GAAKmB,GAAe,CAC5BhC,EAAMa,GAAKmB,GAAUJ,EAEfb,IAAAA,EACFrB,SAAS0B,eAAeP,EAAIK,WAAa,IAAMc,EAAOd,YAE1DH,EAAMQ,UAAUC,IAAI,eAAiBI,EAAWV,YAChDH,EAAMT,UAAYsB,EAAWV,WAE7BS,GAAW,IAKjB,SAASR,EAAOJ,EAAOkB,GACrBlB,EAAMT,UAAY,GAClBS,EAAMQ,UAAY,GAClBR,EAAMQ,UAAUC,IAAI,cAEhBS,EAAM,IACRlB,EAAMT,UAAY2B,EAEdA,GAAO,KACTlB,EAAMQ,UAAUC,IAAI,eAAiBS,EAAIf,YAEzCH,EAAMQ,UAAUC,IAAI,qBAK1B,SAASU,EAAMrB,GAKR,IAJCsB,IAAAA,EAAatB,EAAIuB,QAEnBC,EAAcxB,EAAIyB,OAAO,SAAAL,GAAOA,OAAQ,IAARA,IAE3BM,EAAI,EAAGA,EAAIF,EAAYG,OAAS,EAAGD,IACtCF,EAAYE,KAAOF,EAAYE,EAAI,KACrCF,EAAYE,IAAM,EAClBF,EAAYE,EAAI,GAAK,EACrBnC,GAASiC,EAAYE,GACrBpC,GAAU,GAQVkC,GAJJ3C,SAASC,cAAc,eAAeW,UAAYF,GAElDiC,EAAcA,EAAYC,OAAO,SAAAL,GAAOA,OAAQ,IAARA,KAExBO,OAAStC,EAChBmC,KAAAA,EAAYG,OAAStC,GAC1BmC,EAAYI,KAAK,GAIhB,IAAA,IAAIF,EAAI,EAAGA,EAAIF,EAAYG,OAAQD,IAClCF,EAAYE,KAAOJ,EAAWI,KAChCpC,GAAU,GAIPkC,OAAAA,EAGT,SAASK,IACH,IAAClD,EAAU,CACR,IAAA,IAAImD,EAAI,EAAGA,EAAI1C,EAAM0C,IAAK,CACzB9B,IAAAA,EAAMb,EAAM2C,GAEhB9B,EAAMqB,EAAMrB,GAEZb,EAAM2C,GAAK9B,EAEN,IAAA,IAAI+B,EAAI,EAAGA,EAAI1C,EAAS0C,IAAK,CAKhCzB,EAHIzB,SAAS0B,eAAeuB,EAAEzB,WAAa,IAAM0B,EAAE1B,YACvClB,EAAM2C,GAAGC,KAMrBzC,IACFuB,IACAvB,GAAU,GAGZ0C,KAIJ,SAASC,IACH,IAACtD,EAAU,CACR,IAAA,IAAImD,EAAI,EAAGA,EAAI1C,EAAM0C,IAAK,CACzB9B,IAAAA,EAAMb,EAAM2C,GAEhB9B,EAAIkC,WACJlC,EAAMqB,EAAMrB,IACRkC,UAEJ/C,EAAM2C,GAAK9B,EAEN,IAAA,IAAI+B,EAAI,EAAGA,EAAI1C,EAAS0C,IAAK,CAKhCzB,EAHIzB,SAAS0B,eAAeuB,EAAEzB,WAAa,IAAM0B,EAAE1B,YACvClB,EAAM2C,GAAGC,KAMrBzC,IACFuB,IACAvB,GAAU,GAGZ0C,KAIJ,SAASG,IACH,IAACxD,EAAU,CACR,IAAA,IAAIoD,EAAI,EAAGA,EAAI1C,EAAS0C,IAAK,CAC5B/B,IAAAA,EAAM,CAACb,EAAM,GAAG4C,GAAI5C,EAAM,GAAG4C,GAAI5C,EAAM,GAAG4C,GAAI5C,EAAM,GAAG4C,IAE3D/B,EAAMqB,EAAMrB,GAEP,IAAA,IAAI8B,EAAI,EAAGA,EAAI1C,EAAM0C,IAAK,CAC7B3C,EAAM2C,GAAGC,GAAK/B,EAAI8B,GAMlBxB,EAHIzB,SAAS0B,eAAeuB,EAAEzB,WAAa,IAAM0B,EAAE1B,YACvClB,EAAM2C,GAAGC,KAMrBzC,IACFuB,IACAvB,GAAU,GAGZ0C,KAIJ,SAASI,IACH,IAACzD,EAAU,CACR,IAAA,IAAIoD,EAAI,EAAGA,EAAI1C,EAAS0C,IAAK,CAC5B/B,IAAAA,EAAM,CAACb,EAAM,GAAG4C,GAAI5C,EAAM,GAAG4C,GAAI5C,EAAM,GAAG4C,GAAI5C,EAAM,GAAG4C,IAE3D/B,EAAIkC,WACJlC,EAAMqB,EAAMrB,IACRkC,UAEC,IAAA,IAAIJ,EAAI,EAAGA,EAAI1C,EAAM0C,IAAK,CAC7B3C,EAAM2C,GAAGC,GAAK/B,EAAI8B,GAMlBxB,EAHIzB,SAAS0B,eAAeuB,EAAEzB,WAAa,IAAM0B,EAAE1B,YACvClB,EAAM2C,GAAGC,KAMrBzC,IACFuB,IACAvB,GAAU,GAGZ0C,KAIJ,SAASA,IAKF,IAJDK,IAAAA,GAAO,EACPC,GAAM,EACJC,EAAQ,GAELT,EAAI,EAAGA,EAAI1C,EAAM0C,IACnB,IAAA,IAAIC,EAAI,EAAGA,EAAI1C,EAAS0C,IACvB5C,EAAM2C,GAAGC,KAAOvC,IAClB8C,GAAM,GAGY,IAAhBnD,EAAM2C,GAAGC,IACXQ,EAAMX,KAAK,GAKZ,IAAA,IAAIE,EAAI,EAAGA,EAAI1C,EAAO,EAAG0C,IAAK,CAC5B,IAAA,IAAIC,EAAI,EAAGA,EAAI1C,EAAU,EAAG0C,IAAK,CAC9BS,IAAAA,EAAerD,EAAM2C,GAAGC,GAG3BD,GAAAA,EAAI,GAAK3C,EAAM2C,EAAI,GAAGC,KAAOS,GAC1BV,EAAI1C,EAAO,GAAKD,EAAM2C,EAAI,GAAGC,KAAOS,GACpCT,EAAI,GAAK5C,EAAM2C,GAAGC,EAAI,KAAOS,GAC7BT,EAAI1C,EAAU,GAAKF,EAAM2C,GAAGC,EAAI,KAAOS,EAC3C,CACAH,GAAO,EACP,MAEAA,GAAO,EAIP,IAACA,EACH,MAIAA,GAAAA,GAAyB,IAAjBE,EAAMZ,OAIhB,OAHAzC,EAAYwB,UAAUE,OAAO,eAC7BjC,GAAW,GAKT2D,IACFrD,EAAWyB,UAAUE,OAAO,UAC5BjC,GAAW,GA/Rf8D,OAAOC,OAAS,WAAO3C,OAAAA,KAmSvBnB,EAAY+D,iBAAiB,QAAS,WACpClC,MAGF1B,EAAc4D,iBAAiB,QAAS,WACtClC,MAGF5B,SAAS8D,iBAAiB,QAAS,SAACC,GAC9BA,EAAEC,OAASnD,EAAWC,MACxBkC,IAGEe,EAAEC,OAASnD,EAAWE,OACxBqC,IAGEW,EAAEC,OAASnD,EAAWI,IACxBqC,IAGES,EAAEC,OAASnD,EAAWG,MACxBuC","file":"main.69667936.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst startButton = document.querySelector('.start');\nconst restartButton = document.querySelector('.restart');\nconst startMessage = document.querySelector('.message-start');\nconst winMessage = document.querySelector('.message-win');\nconst loseMessage = document.querySelector('.message-lose');\n\nlet board = [\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n];\n\nconst rows = 4;\nconst columns = 4;\n\nlet isMoved = false;\nlet gameOver;\n\nlet score = 0;\nconst winValue = 2048;\n\ndocument.querySelector('.game-score').innerText = score;\n\nconst directions = {\n  Left: 'ArrowLeft',\n  Right: 'ArrowRight',\n  Down: 'ArrowDown',\n  Up: 'ArrowUp',\n};\n\nwindow.onload = () => (setField());\n\nfunction setField() {\n  isMoved = false;\n  gameOver = false;\n\n  for (let row = 0; row < rows; row++) {\n    for (let cell = 0; cell < columns; cell++) {\n      const field = document.createElement('div');\n\n      field.id = row.toString() + '-' + cell.toString();\n\n      const num = board[row][cell];\n\n      update(field, num);\n\n      document.getElementById('board').append(field);\n    }\n  }\n};\n\nfunction startGame() {\n  board = [\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n  ];\n\n  isMoved = false;\n  gameOver = false;\n  score = 0;\n  document.querySelector('.game-score').innerText = score;\n\n  for (let row = 0; row < rows; row++) {\n    for (let cell = 0; cell < columns; cell++) {\n      const field\n        = document.getElementById(row.toString() + '-' + cell.toString());\n\n      field.id = row.toString() + '-' + cell.toString();\n      update(field, 0);\n    }\n  }\n\n  startMessage.classList.add('hidden');\n  winMessage.classList.add('hidden');\n  loseMessage.classList.add('hidden');\n\n  startButton.classList.add('hidden');\n  restartButton.classList.remove('hidden');\n\n  appendNewCell();\n  appendNewCell();\n};\n\nfunction appendNewCell() {\n  let appended = false;\n  const random = Math.random();\n  const cellNumber = random <= 0.1 ? 4 : 2;\n\n  while (!appended) {\n    const row = Math.floor(Math.random() * rows);\n    const column = Math.floor(Math.random() * columns);\n\n    if (board[row][column] === 0) {\n      board[row][column] = cellNumber;\n\n      const field\n        = document.getElementById(row.toString() + '-' + column.toString());\n\n      field.classList.add('field-cell--' + cellNumber.toString());\n      field.innerText = cellNumber.toString();\n\n      appended = true;\n    }\n  }\n};\n\nfunction update(field, num) {\n  field.innerText = '';\n  field.classList = '';\n  field.classList.add('field-cell');\n\n  if (num > 0) {\n    field.innerText = num;\n\n    if (num <= 2048) {\n      field.classList.add('field-cell--' + num.toString());\n    } else {\n      field.classList.add('field-cell--2048');\n    }\n  }\n};\n\nfunction slide(row) {\n  const initialRow = row.slice();\n\n  let filteredRow = row.filter(num => num !== 0);\n\n  for (let i = 0; i < filteredRow.length - 1; i++) {\n    if (filteredRow[i] === filteredRow[i + 1]) {\n      filteredRow[i] *= 2;\n      filteredRow[i + 1] = 0;\n      score += filteredRow[i];\n      isMoved = true;\n    }\n  }\n\n  document.querySelector('.game-score').innerText = score;\n\n  filteredRow = filteredRow.filter(num => num !== 0);\n\n  if (filteredRow.length < columns) {\n    while (filteredRow.length < columns) {\n      filteredRow.push(0);\n    }\n  }\n\n  for (let i = 0; i < filteredRow.length; i++) {\n    if (filteredRow[i] !== initialRow[i]) {\n      isMoved = true;\n    }\n  }\n\n  return filteredRow;\n};\n\nfunction slideLeft() {\n  if (!gameOver) {\n    for (let r = 0; r < rows; r++) {\n      let row = board[r];\n\n      row = slide(row);\n\n      board[r] = row;\n\n      for (let c = 0; c < columns; c++) {\n        const field\n          = document.getElementById(r.toString() + '-' + c.toString());\n        const num = board[r][c];\n\n        update(field, num);\n      }\n    }\n\n    if (isMoved) {\n      appendNewCell();\n      isMoved = false;\n    }\n\n    checkGameOver();\n  }\n};\n\nfunction slideRight() {\n  if (!gameOver) {\n    for (let r = 0; r < rows; r++) {\n      let row = board[r];\n\n      row.reverse();\n      row = slide(row);\n      row.reverse();\n\n      board[r] = row;\n\n      for (let c = 0; c < columns; c++) {\n        const field\n          = document.getElementById(r.toString() + '-' + c.toString());\n        const num = board[r][c];\n\n        update(field, num);\n      }\n    }\n\n    if (isMoved) {\n      appendNewCell();\n      isMoved = false;\n    }\n\n    checkGameOver();\n  }\n};\n\nfunction slideUp() {\n  if (!gameOver) {\n    for (let c = 0; c < columns; c++) {\n      let row = [board[0][c], board[1][c], board[2][c], board[3][c]];\n\n      row = slide(row);\n\n      for (let r = 0; r < rows; r++) {\n        board[r][c] = row[r];\n\n        const field\n          = document.getElementById(r.toString() + '-' + c.toString());\n        const num = board[r][c];\n\n        update(field, num);\n      }\n    }\n\n    if (isMoved) {\n      appendNewCell();\n      isMoved = false;\n    }\n\n    checkGameOver();\n  }\n};\n\nfunction slideDown() {\n  if (!gameOver) {\n    for (let c = 0; c < columns; c++) {\n      let row = [board[0][c], board[1][c], board[2][c], board[3][c]];\n\n      row.reverse();\n      row = slide(row);\n      row.reverse();\n\n      for (let r = 0; r < rows; r++) {\n        board[r][c] = row[r];\n\n        const field\n          = document.getElementById(r.toString() + '-' + c.toString());\n        const num = board[r][c];\n\n        update(field, num);\n      }\n    }\n\n    if (isMoved) {\n      appendNewCell();\n      isMoved = false;\n    }\n\n    checkGameOver();\n  }\n};\n\nfunction checkGameOver() {\n  let lose = false;\n  let win = false;\n  const zeros = [];\n\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < columns; c++) {\n      if (board[r][c] === winValue) {\n        win = true;\n      }\n\n      if (board[r][c] === 0) {\n        zeros.push(0);\n      }\n    }\n  }\n\n  for (let r = 0; r < rows - 1; r++) {\n    for (let c = 0; c < columns - 1; c++) {\n      const currentValue = board[r][c];\n\n      if (\n        (r > 0 && board[r - 1][c] === currentValue)\n        || (r < rows - 1 && board[r + 1][c] === currentValue)\n        || (c > 0 && board[r][c - 1] === currentValue)\n        || (c < columns - 1 && board[r][c + 1] === currentValue)\n      ) {\n        lose = false;\n        break;\n      } else {\n        lose = true;\n      }\n    }\n\n    if (!lose) {\n      break;\n    }\n  }\n\n  if (lose && zeros.length === 0) {\n    loseMessage.classList.remove('hidden');\n    gameOver = true;\n\n    return;\n  }\n\n  if (win) {\n    winMessage.classList.remove('hidden');\n    gameOver = true;\n  }\n}\n\nstartButton.addEventListener('click', () => {\n  startGame();\n});\n\nrestartButton.addEventListener('click', () => {\n  startGame();\n});\n\ndocument.addEventListener('keyup', (e) => {\n  if (e.code === directions.Left) {\n    slideLeft();\n  }\n\n  if (e.code === directions.Right) {\n    slideRight();\n  }\n\n  if (e.code === directions.Up) {\n    slideUp();\n  }\n\n  if (e.code === directions.Down) {\n    slideDown();\n  }\n});\n"]}